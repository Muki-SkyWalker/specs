<html>
    <head>
      <title>Mockito Specification</title>
        <style type="text/css" media="all">
          @import url('./css/maven-base.css');
          @import url('./css/maven-theme.css');
          @import url('./css/site.css');
        </style>
        <link href="./css/prettify.css" rel="stylesheet" type="text/css"></link>
        <script type="text/javascript" src="./css/prettify.js"></script>
        <link href="./css/print.css" type="text/css" rel="stylesheet" media="print"></link>
        <link href="./css/tooltip.css" type="text/css" rel="stylesheet"></link>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
        <script type="text/javascript" src="./css/tooltip.js"></script>
        <script language="javascript"> function init() { prettyPrint();noNavBar()}
    // found on : http://www.tek-tips.com/faqs.cfm?fid=6620
    String.prototype.endsWith = function(str) { return (this.match(str+'$') == str) }

    function changeWidth(id,width) {
      document.getElementById(id).style.width = width;
    }
    function changeMarginLeft(id, margin) {
      document.getElementById(id).style.marginLeft = margin;
    }
    function noNavBar() {
      changeWidth('leftColumn','0px');
      document.getElementById('leftColumn').style.visibility = 'hidden'; 
      document.getElementById('leftColumn').style.display = 'none'; 
      changeMarginLeft('bodyColumn', '35px')
   }
   function toggleNavBar(image) {
      toggleImage(image)
      if (image.src.endsWith('images/expanded.gif')) {
        changeWidth('leftColumn','20px');
        changeMarginLeft('bodyColumn', '35px')
      }
    else {
        changeWidth('leftColumn','250px');
        changeMarginLeft('bodyColumn', '277px')
      }
   }
   function toggleImage(image) {
      if (image.src.endsWith('images/expanded.gif')) {
        image.src = 'images/collapsed.gif';
      }
    else {
        image.src = 'images/expanded.gif';
      }
   }
    function showHideTable(tableId) {
      table = document.getElementById(tableId)
      table.style.display = (table.style.display == 'none')? 'block' : 'none';
    }
    function showExampleMessage(status, exId, event) {
    exampleMessage = document.getElementById('rowmess:' + exId)
    exampleIcon = document.getElementById('rowicon:' + exId)
    showToolTipWithIcon(status, exampleIcon.src, exampleMessage.innerHTML, event)
  }
    function showExampleDesc(exId, event) {
        exampleDesc = document.getElementById('rowdesc:' + exId)
        showToolTip('Description', exampleDesc.innerHTML, event)
    }


    </script>
        <script language="javascript">window.onload=init;</script>
        <!-- the tabber.js file must be loaded after the onload function has been set, in order to run the
             tabber code, then the init code -->
        <script type="text/javascript" src="./css/tabber.js"></script> 
        <link href="./css/tabber.css" type="text/css" rel="stylesheet" media="screen"></link> 
    </head>
    <body>
      <div id="toolTip"></div>
      <a name="top"></a>
      <div id="leftColumn">
     
    </div>
      <div id="bodyColumn">
        <h2>Mockito Specification</h2><a name="Mockito+Specification"></a><html xmlns="http://www.w3.org/1999/xhtml"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta></head><body><p>Mockito is a Java library for mocking.</p><p>The following samples are taken from the main documentation which can be found <a href="http://mockito.googlecode.com/svn/branches/1.7/javadoc/org/mockito/Mockito.html">here</a></p><h3 id="Letsverifysomebehaviour">Let's verify some behaviour</h3><p>First of all, we need to import some classes and traits for our examples: <code class="prettyprint"></code></br><code class="prettyprint"></code></br><code class="prettyprint">  import org.specs.Specification</code></br><code class="prettyprint">  import org.specs.mock.Mockito</code></br><code class="prettyprint">  import org.mockito.Mock</code></br><code class="prettyprint">  import java.util.List</code></br><code class="prettyprint">  import java.util.LinkedList</code></p><p>A mock is created with the <code>mock</code> method: <code class="prettyprint"></code></br><code class="prettyprint"></code></br><code class="prettyprint">  object s extends Specification with Mockito {</code></br><code class="prettyprint"></code></br><code class="prettyprint">    // mock creation</code></br><code class="prettyprint">    val mockedList = mock[List[String]]</code></br><code class="prettyprint"></code></br><code class="prettyprint">    // using mock object</code></br><code class="prettyprint">    mockedList.add(&quot;one&quot;)</code></br><code class="prettyprint">    mockedList.clear()</code></p> // <ex onmouseout="hideToolTip();" onmouseover="showExampleDesc('9088495',event)" class="success">It is possible to check that some methods have been called on the mock with the <code>called</code> matcher</ex>:<p><code class="prettyprint">    // verification</code></br><code class="prettyprint">    mockedList.add(&quot;one&quot;) was called</code></br><code class="prettyprint">    mockedList.clear() was called</code></br><code class="prettyprint">  } </code></p><h4 id="Failures">Failures</h4><p>If one method has not been called on a mock, <ex onmouseout="hideToolTip();" onmouseover="showExampleDesc('9443274',event)" class="success">the <code>was called</code> matcher must throw a <code>FailureException</code></ex>: <code class="prettyprint"></code></br><code class="prettyprint"></code></br><code class="prettyprint">  object s2 extends Specification with Mockito {</code></br><code class="prettyprint">    val m = mock[List[String]]</code></br><code class="prettyprint">    m.clear() was called</code></br><code class="prettyprint">  }</code></br><code class="prettyprint">  s2.failures</code></br><code class="prettyprint">  </code></br>  &gt; <code class="prettyprint">res0: List[org.specs.execute.FailureException] = List(org.specs.specification.FailureExceptionWithResult: The method was not called as expected: Wanted but not invoked: list.clear();)</code></p><h4 id="Argumentmatchers">Argument matchers</h4><p><a href="org.specs.mock.argumentMatchers.html">Argument Matchers</a> allow flexible verification or stubbing.</p><h3 id="Howaboutsomestubbing">How about some stubbing?</h3><p><ex onmouseout="hideToolTip();" onmouseover="showExampleDesc('11214364',event)" class="success">You can mock concrete classes, not only interfaces</ex><code class="prettyprint"></code></br><code class="prettyprint"></code></br><code class="prettyprint">  object s3 extends Specification with Mockito {</code></br><code class="prettyprint">    val mockedList = mock[LinkedList[String]]</code></br><code class="prettyprint"></code></br><code class="prettyprint">    // stubbing</code></br><code class="prettyprint">    mockedList.get(0) returns &quot;first&quot;</code></br><code class="prettyprint">    mockedList.clear() throws new RuntimeException</code></br><code class="prettyprint">  }</code></p><p><ex onmouseout="hideToolTip();" onmouseover="showExampleDesc('10006157',event)" class="success">Calling a stubbed method with <code>returns</code> returns the expected value</ex>. For example, the following prints &quot;first&quot;:</p><p><code class="prettyprint">s3.mockedList.get(0)</code></br>&gt; <code class="prettyprint">res2: String = first</code></p><p><ex onmouseout="hideToolTip();" onmouseover="showExampleDesc('27392019',event)" class="success">Calling a stubbed method with <code>throws</code> throws the expected exception</ex>. For example, the following throws a RuntimeException:</p><p><code class="prettyprint">s3.mockedList.clear()</code></br>&gt; <code class="prettyprint"></code></br><code class="prettyprint">import org.specs.Specification</code></br><code class="prettyprint">import org.specs.mock.Mockito</code></br><code class="prettyprint">import org.mockito.Mock</code></br><code class="prettyprint">import java.util.List</code></br><code class="prettyprint">import java.util.LinkedList</code></br><code class="prettyprint">defined module s3</code></br><code class="prettyprint">java.lang.RuntimeException</code></br><code class="prettyprint">	at .&lt;init&gt;(&lt;console&gt;:9)</code></br><code class="prettyprint">	at .&lt;clinit&gt;(&lt;console&gt;)</code></br><code class="prettyprint">	at RequestResult$.&lt;init&gt;(&lt;console&gt;:4)</code></br><code class="prettyprint">	at RequestResult$.&lt;clinit&gt;(&lt;console&gt;)</code></br><code class="prettyprint">	at RequestResult$result(&lt;console&gt;)</code></br><code class="prettyprint">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</code></br><code class="prettyprint">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)</code></br><code class="prettyprint">	at sun.reflect.DelegatingMethodAccessorImpl.invok...</code></p><p><ex onmouseout="hideToolTip();" onmouseover="showExampleDesc('4176952',event)" class="success">Calling a non-stubbed method should return a default value</ex>. For example, the following returns <code>null</code> because <code>get(999)</code> was not stubbed:</p><p><code class="prettyprint">s3.mockedList.get(999)</code></br>&gt; <code class="prettyprint">res4: String = null</code></p><h3 id="Verifyingthenumberofinvocations">Verifying the number of invocations</h3><p>The number of invocations (atLeast, atMost) can also be checked: <a href="org.specs.mock.numberOfInvocations.html">Number of invocations</a></p><h3 id="Verifyingthatinvocationsoccurinorder">Verifying that invocations occur in order</h3><p>When calls have to happen in a given order of invocations, this can be also checked <a href="org.specs.mock.inOrder.html">In order calls</a></p><h3 id="Callbacks">Callbacks</h3><p>In some rare case, you want the stubbed return values to be a function of the input method parameters: <a href="org.specs.mock.callbacks.html">Stubbing with callbacks</a></p><h3 id="Annotations">Annotations</h3><p><ex onmouseout="hideToolTip();" onmouseover="showExampleDesc('6978620',event)" class="success">It is possible to use annotations to declare mocks</ex><code class="prettyprint"></code></br><code class="prettyprint"></code></br><code class="prettyprint">  object s5 extends Specification with Mockito {</code></br><code class="prettyprint">    // do we gain anything using Scala, compared to val mockedList = mock[List[String]]?</code></br><code class="prettyprint">    @Mock val mockedList: List[String] = null  </code></br><code class="prettyprint">    &quot;this needs to be inside an example because otherwise a NPE is thrown&quot; in {</code></br><code class="prettyprint">      mockedList.clear()</code></br><code class="prettyprint">      mockedList.clear() was called</code></br><code class="prettyprint">    }</code></br><code class="prettyprint">  }</code></p><p><code class="prettyprint">s5.isOk</code></br>&gt; <code class="prettyprint">res5: Boolean = true</code></br>&gt; <code class="prettyprint">res7: List[Throwable] = List()</code></p><h3 id="Stubbingconsecutivecallsiteratorstylestubbing">Stubbing consecutive calls (iterator-style stubbing)</h3><p>Sometimes we need to stub with different return value/exception for the same method call. Typical use case could be mocking iterators. Original version of Mockito did not have this feature to promote simple mocking. For example, instead of iterators one could use Iterable or simply collections. Those offer natural ways of stubbing (e.g. using real collections). </br>In rare scenarios stubbing consecutive calls could be useful, though: <code class="prettyprint"></code></br><code class="prettyprint"></code></br><code class="prettyprint">  object s6 extends Specification with Mockito {</code></br><code class="prettyprint">    val mockedList = mock[List[String]]</code></br><code class="prettyprint">    mockedList.get(0) returns &quot;hello&quot; thenReturns &quot;world&quot;</code></br><code class="prettyprint">  } </code></p><p><ex onmouseout="hideToolTip();" onmouseover="showExampleDesc('15334152',event)" class="success">The first call returns the first value</ex>:</p><p><code class="prettyprint">s6.mockedList.get(0)</code></br>&gt; <code class="prettyprint">res8: String = hello</code></p><p><ex onmouseout="hideToolTip();" onmouseover="showExampleDesc('4496234',event)" class="success">The second call returns the second value</ex>:</p><p><code class="prettyprint">s6.mockedList.get(0)</code></br>&gt; <code class="prettyprint">res10: String = world</code></p><p>When several values need to be stubbed this version of returns would also work: <code class="prettyprint"></code></br><code class="prettyprint"></code></br><code class="prettyprint">  object s7 extends Specification with Mockito {</code></br><code class="prettyprint">    val mockedList = mock[List[String]]</code></br><code class="prettyprint">    mockedList.get(0) returns (&quot;hello&quot;, &quot;world&quot;)</code></br><code class="prettyprint">  }</code></p><p><ex onmouseout="hideToolTip();" onmouseover="showExampleDesc('3664549',event)" class="success">The first value is &quot;hello&quot;</ex>:</br><code class="prettyprint">s7.mockedList.get(0)</code></br>&gt; <code class="prettyprint">res11: String = hello</code></p><p><ex onmouseout="hideToolTip();" onmouseover="showExampleDesc('20200129',event)" class="success">The second value is &quot;world&quot;</ex>:</br><code class="prettyprint">s7.mockedList.get(0)</code></br>&gt; <code class="prettyprint">res13: String = world</code></p><h3 id="Spies">Spies</h3><p>You can create <a href="org.specs.mock.spies.html">Spies</a> of real objects. When you use a spy then the real methods are called (unless a method was stubbed).</p><h3 id="Returnvalues">Return values</h3><p>Speficic <a href="org.specs.mock.returnValues.html">Return values</a> can be returned on unstubbed methods.</p></body></html><h3><img onclick="toggleImage(this); showHideTable('sus:31300105')" src="images/collapsed.gif"></img>Examples summary</h3><div style="display:none" id="sus:31300105">
          <table class="bodyTable">
             <tr class="b">
      <td id="rowdesc:9088495"><img src="images/icon_success_sml.gif" id="rowicon:9088495"></img> <t>It is possible to check that some methods have been called on the mock with the <code>called</code> matcher</t></td>
    </tr><tr class="a">
      <td id="rowdesc:9443274"><img src="images/icon_success_sml.gif" id="rowicon:9443274"></img> <t>the <code>was called</code> matcher must throw a <code>FailureException</code></t></td>
    </tr><tr class="b">
      <td id="rowdesc:11214364"><img src="images/icon_success_sml.gif" id="rowicon:11214364"></img> <t>You can mock concrete classes, not only interfaces</t></td>
    </tr><tr class="a">
      <td id="rowdesc:10006157"><img src="images/icon_success_sml.gif" id="rowicon:10006157"></img> <t>Calling a stubbed method with <code>returns</code> returns the expected value</t></td>
    </tr><tr class="b">
      <td id="rowdesc:27392019"><img src="images/icon_success_sml.gif" id="rowicon:27392019"></img> <t>Calling a stubbed method with <code>throws</code> throws the expected exception</t></td>
    </tr><tr class="a">
      <td id="rowdesc:4176952"><img src="images/icon_success_sml.gif" id="rowicon:4176952"></img> <t>Calling a non-stubbed method should return a default value</t></td>
    </tr><tr class="b">
      <td id="rowdesc:6978620"><img src="images/icon_success_sml.gif" id="rowicon:6978620"></img> <t>It is possible to use annotations to declare mocks</t></td>
    </tr><tr class="a">
      <td id="rowdesc:15334152"><img src="images/icon_success_sml.gif" id="rowicon:15334152"></img> <t>The first call returns the first value</t></td>
    </tr><tr class="b">
      <td id="rowdesc:4496234"><img src="images/icon_success_sml.gif" id="rowicon:4496234"></img> <t>The second call returns the second value</t></td>
    </tr><tr class="a">
      <td id="rowdesc:3664549"><img src="images/icon_success_sml.gif" id="rowicon:3664549"></img> <t>The first value is &quot;hello&quot;</t></td>
    </tr><tr class="b">
      <td id="rowdesc:20200129"><img src="images/icon_success_sml.gif" id="rowicon:20200129"></img> <t>The second value is &quot;world&quot;</t></td>
    </tr>
          </table>
        </div>
      </div>
    </body>
  </html>